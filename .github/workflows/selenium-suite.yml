name: Run Selenium Tests

on:
  workflow_dispatch:
    inputs:
      test_suite:
        description: |
          Leave empty → run all tests
          Single class → ImageGeneratorTests
          Specific method → ImageGeneratorTests#testGenerateImage
          Multiple classes → ClassA,ClassB
        required: false
        default: ""

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Java
        uses: actions/setup-java@v3
        with:
          distribution: temurin
          java-version: 17

      - name: Set up Chrome
        uses: browser-actions/setup-chrome@v1

      - name: Run Tests
        env:
          HEADLESS: true
        run: |
          if [ -z "${{ github.event.inputs.test_suite }}" ]; then
            echo "Running all tests"
            mvn clean test
          else
            echo "Running selected test(s): ${{ github.event.inputs.test_suite }}"
            mvn clean test -Dtest=${{ github.event.inputs.test_suite }}
          fi
